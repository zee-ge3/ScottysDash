<!DOCTYPE html><meta charset="utf-8"><meta name="viewport"content="width=device-width,initial-scale=1,user-scalable=no"><title>Infinite Ski</title><style>*{margin:0;padding:0}body{background:#000;overflow:hidden;touch-action:none}canvas{display:block}</style><canvas id="c"></canvas><script>zzfxG=(e=1,t=.05,a=.22,l=0,o=0,i=.1,n=0,r=1,s=0,g=0,c=0,f=0,m=0,u=0,p=0,h=0,d=0,x=1,y=0,T=0)=>{let S=2*Math.PI,M=44100,k=Math.max,W=s*=500*S/M/M,b=a*M|0,X=i*M|0,v=l*M|0,w=o*M|0,H=y*M|0,Y=T*M|0,R=b+v+X+w+(d*M|0),C=R,P=[],Z=0,D=0,A=0;for(;A<C;A++){let t=A/M,a=A<b?A/b:A<b+v?1:A<R-w?k(0,1-(A-b-v)/X):A<R?k(0,1-(A-R+w)/w):0;a=a<=0?0:a,Z+=1+2*n*S/M;let l=Math.sin(Z)*a*e*(1+u*Math.sin(2*S*t*m));D+=l,(g||c||f)&&(W+=500*c*S/M/M,s=500*g*S/M+W,D+=Math.sin(s)*f*a),P.push(h&&(A<H||A>R-Y)?0:l*(1+p*Math.sin(2*S*t*r)))}return P};let W,H,c=document.getElementById("c"),g=c.getContext("2d");function resize(){W=c.width=innerWidth,H=c.height=innerHeight}resize(),onresize=resize;const DRAW=80,PI=Math.PI;let audioCtx,sndCarve,state=0,speed=0,turnRate=0,score=0,combo=1,maxCombo=1,hiScore=+localStorage.getItem("hs")||0,inputX=0,inputTuck=0,crashed=0,crashTimer=0,particles=[],shakeX=0,shakeY=0,lastTime=0,pX=0,pY=0,pZ=0,camX=0,camY=3,camZ=-5,pScrX=0,pScrY=0;function lerp(e,t,a){return e+(t-e)*a}function initAudio(){if(!audioCtx)try{audioCtx=new(window.AudioContext||webkitAudioContext),audioCtx.resume(),sndCarve=zzfxG(.3,.02,.08,0,.04,.04,2,1.5)}catch(e){}}function playBuf(e){if(audioCtx&&e)try{let t=audioCtx.createBuffer(1,e.length,44100),a=t.getChannelData(0);for(let t=0;t<e.length;t++)a[t]=e[t];let l=audioCtx.createBufferSource();l.buffer=t,l.connect(audioCtx.destination),l.start()}catch(e){}}function getHeight(e,t){return.25*(40*Math.sin(.009*t)+20*Math.sin(.023*t)+10*Math.sin(.051*t)+8*Math.sin(.1*t)+5*Math.sin(.04*e+.012*t))}function curvature(e){return 5*Math.sin(.013*e)+3*Math.sin(.029*e)+1.5*Math.sin(.067*e)}function terrainType(e){let t=.5*Math.sin(.037*e)+.5;return e>500&&(t+=.15),e>1500&&(t+=.15),t<.25?0:t<.6?1:t<.8?2:3}function D(e,t,a,l,o,i,n){g.fillStyle=n,g.beginPath(),g.moveTo(e-a,t),g.lineTo(e+a,t),g.lineTo(l+i,o),g.lineTo(l-i,o),g.fill()}function render(){let e=.38*H,t=.5*H,a=g.createLinearGradient(0,0,0,e+30);a.addColorStop(0,"#4a8fc7"),a.addColorStop(.85,"#b0d8f0"),a.addColorStop(1,"#dde5ec"),g.fillStyle=a,g.fillRect(0,0,W,e+30),g.fillStyle="#dde5ec",g.fillRect(0,e+20,W,H-e-20);for(let t=0;t<6;t++){let a=(t*W*.22+.3*camZ+197*t)%(W+200)-100,l=45+18*t;g.fillStyle="#7888a0",g.beginPath(),g.moveTo(a-100,e+10),g.lineTo(a,e-l),g.lineTo(a+110,e+10),g.fill(),g.fillStyle="#e0e8f0",g.beginPath(),g.moveTo(a-25,e-.5*l),g.lineTo(a,e-l),g.lineTo(a+30,e-.5*l),g.fill()}let l=Math.floor(camZ),o=[],i=0,n=Math.round(pZ-camZ),r=0;for(let a=0;a<=80;a++){let s=l+a,g=s-camZ;g<.2&&(g=.2),i+=.008*curvature(s),a==n&&(r=i);let c=e-(getHeight(camX,s)-camY)*t/g+shakeY,f=W/2+i*W*.15/g+shakeX,m=Math.max(W,2.5*W/g);o.push({si:s,sx:f,sy:c,tw:m,dz:g})}for(let e=o.length-1;e>0;e--){let t=o[e],a=o[e-1];if(t.sy<-50&&a.sy<-50)continue;let l,i=terrainType(t.si),n=t.si%2==0;l=0==i?n?"#e8eef4":"#d8e0e8":1==i?n?"#f0f5fa":"#e2eaf2":2==i?n?"#c0d4e8":"#aec4d8":n?"#d0d8e0":"#c0c8d0",D(t.sx,t.sy,t.tw,a.sx,a.sy+1,a.tw,l)}if(speed>8&&1==state){g.strokeStyle="rgba(255,255,255,0.3)",g.lineWidth=1;for(let e=0;e<2*(speed-8);e++){let e=Math.random()*W,t=.4*H+Math.random()*H*.5;g.beginPath(),g.moveTo(e,t),g.lineTo(e+5*turnRate,t+15+2*speed),g.stroke()}}let s=pZ-camZ;if(s>.3){pScrX=W/2+(r+2*(pX-camX))*W*.15/s+shakeX,pScrY=e-(pY-camY)*t/s+shakeY,drawSkier(pScrX,pScrY,9/s)}for(let e=particles.length-1;e>=0;e--){let t=particles[e];t.x+=t.vx,t.y+=t.vy,t.vy+=.1,t.life--,g.fillStyle=`rgba(255,255,255,${t.life/t.ml})`,g.fillRect(t.x,t.y,t.sz,t.sz),t.life<=0&&particles.splice(e,1)}}function drawSkier(e,t,a){let l=.3*turnRate;g.save(),g.translate(e,t),g.scale(a,a),g.rotate(.15*l),g.fillStyle="rgba(0,0,0,0.15)",g.beginPath(),g.ellipse(0,14,12,4,0,0,2*PI),g.fill(),g.fillStyle="#225",g.save(),g.rotate(.2*l),g.fillRect(-10,8,3,22),g.fillRect(7,8,3,22),g.restore(),g.fillStyle="#222";let o=inputTuck?8:12;g.fillRect(-6,0,4,o),g.fillRect(2,0,4,o),g.fillStyle="#d22",inputTuck?g.fillRect(-8,-6,16,8):g.fillRect(-7,-14,14,16),g.strokeStyle="#222",g.lineWidth=2;let i=inputTuck?-4:-8;g.beginPath(),g.moveTo(-7,i),g.lineTo(3*l-14,i+8),g.stroke(),g.beginPath(),g.moveTo(7,i),g.lineTo(14+3*l,i+8),g.stroke(),g.strokeStyle="#999",g.lineWidth=1,g.beginPath(),g.moveTo(3*l-14,i+8),g.lineTo(4*l-16,i+25),g.stroke(),g.beginPath(),g.moveTo(14+3*l,i+8),g.lineTo(16+4*l,i+25),g.stroke(),g.fillStyle="#fdb";let n=inputTuck?-10:-18;g.beginPath(),g.arc(0,n,5,0,2*PI),g.fill(),g.fillStyle="#d22",g.beginPath(),g.arc(0,n-1,5,PI,0),g.fill(),g.fillStyle="#333",g.fillRect(-4,n-2,8,3),g.restore()}function spraySnow(){for(let e=0;e<3;e++)particles.push({x:pScrX+(turnRate>0?-15:15),y:pScrY+10,vx:2*-turnRate+2*Math.random()-1,vy:3*-Math.random()-1,life:15+10*Math.random()|0,ml:25,sz:2+3*Math.random()})}function ambientSnow(){Math.random()<.3+.05*speed&&particles.push({x:Math.random()*W,y:-5,vx:.5*turnRate+Math.random()-.5,vy:1+2*Math.random()+.3*speed,life:60+40*Math.random()|0,ml:100,sz:1+2*Math.random()})}function update(e){if(1!=state)return;e>.1&&(e=.1);let t=.15+.008*(getHeight(pX,pZ+2)-getHeight(pX,pZ-2)),a=terrainType(Math.floor(pZ)),l=0==a?.015:1==a?.025:2==a?.008:.02,o=9.8*t,i=.08*Math.abs(turnRate),n=speed*speed*.001*(inputTuck?.6:1);speed+=o*e,speed-=(l+i)*speed*e,speed-=n*e,speed=Math.max(2,Math.min(speed,20));let r=.002*curvature(pZ);turnRate+=(1.5*inputX-turnRate)*e*4,pX+=turnRate*e*.8,pX+=r*speed*e*.1,pZ+=speed*e*.5,pY=getHeight(pX,pZ),score+=speed*e*2;let s=Math.min(1,5*e);camX=lerp(camX,pX,s),camY=lerp(camY,pY+3,s),camZ=lerp(camZ,pZ-5,s),Math.abs(turnRate)>.5&&speed>3&&(spraySnow(),Math.random()<.05&&playBuf(sndCarve)),ambientSnow(),shakeX*=.85,shakeY*=.85,Math.abs(shakeX)<.5&&(shakeX=0),Math.abs(shakeY)<.5&&(shakeY=0)}function drawHUD(){if(1!=state)return;let e=Math.max(14,.04*W|0);g.textAlign="left",g.font="bold "+e+"px monospace",g.fillStyle="#fff",g.fillText("Score: "+Math.floor(score),10,e+5),g.fillText("Speed: "+speed.toFixed(1),10,2*e+10),combo>1&&(g.fillStyle="#ff0",g.fillText("Combo x"+combo+"!",10,3*e+15))}function drawTitle(){g.textAlign="center",g.fillStyle="#fff",g.font="bold "+Math.max(36,.1*W|0)+"px monospace",g.fillText("INFINITE",W/2,.28*H),g.fillText("SKI",W/2,.38*H),g.font=Math.max(14,.04*W|0)+"px monospace",g.fillStyle="rgba(255,255,255,0.7)",g.fillText("Dodge trees, hit gates, go fast!",W/2,.48*H),Date.now()%1e3<600&&(g.fillStyle="#fff",g.font="bold "+Math.max(18,.05*W|0)+"px monospace",g.fillText("TAP TO START",W/2,.62*H)),hiScore>0&&(g.fillStyle="#ff0",g.font=Math.max(14,.04*W|0)+"px monospace",g.fillText("Best: "+hiScore,W/2,.72*H)),g.fillStyle="rgba(255,255,255,0.5)",g.font=Math.max(11,.03*W|0)+"px monospace",g.fillText("Touch sides to steer | Bottom = tuck",W/2,.82*H),g.fillText("Arrow keys / mouse on desktop",W/2,.87*H)}function drawGameOver(){g.textAlign="center",g.fillStyle="rgba(0,0,0,0.5)",g.fillRect(0,.2*H,W,.6*H),g.fillStyle="#f44",g.font="bold "+Math.max(32,.09*W|0)+"px monospace",g.fillText("CRASHED!",W/2,.35*H),g.fillStyle="#fff",g.font=Math.max(18,.05*W|0)+"px monospace",g.fillText("Score: "+Math.floor(score),W/2,.47*H),g.fillText("Distance: "+Math.floor(pZ)+"m",W/2,.54*H),maxCombo>1&&g.fillText("Max Combo: x"+maxCombo,W/2,.61*H),Math.floor(score)>=hiScore&&hiScore>0&&(g.fillStyle="#ff0",g.fillText("NEW HIGH SCORE!",W/2,.68*H)),Date.now()%1e3<600&&(g.fillStyle="#fff",g.font="bold "+Math.max(16,.045*W|0)+"px monospace",g.fillText("TAP TO RETRY",W/2,.78*H))}function resetGame(){pX=0,pZ=0,pY=getHeight(0,0),speed=5,turnRate=0,camX=0,camY=pY+3,camZ=pZ-5,score=0,combo=1,maxCombo=1,crashed=0,crashTimer=0,particles=[],shakeX=0,shakeY=0}let keys={},mouseDown=0,mouseX=0,mouseY=0;function handlePointer(e){e.preventDefault();let t=e.touches?e.touches[0]:e;mouseX=t.clientX,mouseY=t.clientY,mouseDown=1}function startOrRetry(){0==state?(state=1,resetGame()):2==state&&crashTimer<=0&&(state=0)}function processInput(){if(inputX=0,inputTuck=0,(keys.ArrowLeft||keys.a)&&(inputX=-1),(keys.ArrowRight||keys.d)&&(inputX=1),(keys.ArrowDown||keys.s)&&(inputTuck=1),mouseDown){let e=(mouseX-W/2)/(W/2);inputX=Math.max(-1,Math.min(1,1.5*e)),mouseY>.7*H&&(inputTuck=1)}}function frame(e){let t=(e-lastTime)/1e3;lastTime=e,t>.2&&(t=.016),processInput(),1==state&&update(t),2==state&&(crashTimer-=t,shakeX*=.9,shakeY*=.9),render(),drawHUD(),0==state&&drawTitle(),2==state&&drawGameOver(),requestAnimationFrame(frame)}onkeydown=e=>{keys[e.key]=1,1!=state&&startOrRetry()},onkeyup=e=>{keys[e.key]=0},c.addEventListener("touchstart",e=>{initAudio(),handlePointer(e),1!=state&&startOrRetry()},{passive:!1}),c.addEventListener("touchmove",e=>{handlePointer(e)},{passive:!1}),c.addEventListener("touchend",e=>{e.preventDefault(),mouseDown=0},{passive:!1}),c.addEventListener("mousedown",e=>{initAudio(),mouseDown=1,mouseX=e.clientX,mouseY=e.clientY,1!=state&&startOrRetry()}),c.addEventListener("mousemove",e=>{mouseDown&&(mouseX=e.clientX,mouseY=e.clientY)}),c.addEventListener("mouseup",()=>{mouseDown=0}),pY=getHeight(0,0),camY=pY+3,lastTime=performance.now(),requestAnimationFrame(frame)</script>