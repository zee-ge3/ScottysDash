<!DOCTYPE html><meta charset="utf-8"><meta name="viewport"content="width=device-width,initial-scale=1,user-scalable=no"><title>Infinite Ski</title><style>*{margin:0;padding:0}body{background:#000;overflow:hidden;touch-action:none}canvas{display:block}</style><canvas id="c"></canvas><script>zzfx=(...e)=>{let t=new(window.AudioContext||webkitAudioContext),l=t.createBuffer(1,96e3,44100),a=l.getChannelData(0);e.map((e,t)=>a[t]=e);let o=t.createBufferSource();o.buffer=l,o.connect(t.destination),o.start()},zzfxG=(e=1,t=.05,l=.22,a=0,o=0,i=.1,n=0,s=1,r=0,x=0,f=0,c=0,h=0,d=0,u=0,m=0,p=0,y=1,T=0,M=0)=>{let S=2*Math.PI,b=44100,k=Math.max,v=r*=500*S/b/b,w=l*b|0,W=i*b|0,g=a*b|0,H=o*b|0,R=T*b|0,X=M*b|0,P=w+g+W+H+(p*b|0),C=P,z=[],D=0,Y=0,A=0;for(;A<C;A++){let t=A/b,l=A<w?A/w:A<w+g?1:A<P-H?k(0,1-(A-w-g)/W):A<P?k(0,1-(A-P+H)/H):0;l=l<=0?0:l,D+=1+2*n*S/b;let a=Math.sin(D)*l*e*(1+d*Math.sin(2*S*t*h));Y+=a,(x||f||c)&&(v+=500*f*S/b/b,r=500*x*S/b+v,Y+=Math.sin(r)*c*l),z.push(m&&(A<R||A>P-X)?0:a*(1+u*Math.sin(2*S*t*s)))}return z},zzfxP=(...e)=>{let t=new(window.AudioContext||webkitAudioContext),l=e.flat(),a=t.createBuffer(1,l.length,44100),o=a.getChannelData(0);l.map((e,t)=>o[t]=e);let i=t.createBufferSource();i.buffer=a,i.connect(t.destination),i.start()};let W,H,c=document.getElementById("c"),x=c.getContext("2d");function resize(){W=c.width=innerWidth,H=c.height=innerHeight}resize(),onresize=resize;const SEG=200,DRAW=80,PI=Math.PI;let sndCarve,sndCrash,sndGate,sndWind,state=0,dist=0,speed=0,playerX=0,turnRate=0,score=0,combo=1,maxCombo=1,hiScore=+localStorage.getItem("hs")||0,inputX=0,inputTuck=0,crashed=0,crashTimer=0,particles=[],shakeX=0,shakeY=0,lastTime=0,audioUnlocked=0;function initSounds(){if(!audioUnlocked){audioUnlocked=1;try{sndCarve=zzfxG(.3,.02,.1,0,.05,.05,2,1.5,0,0,0,0,0,0,0,0,0,1,.01),sndCrash=zzfxG(1,.05,.5,.1,.1,.3,3,.5,0,0,0,0,0,5,0,.5,.1,1,.02),sndGate=zzfxG(.5,.01,.1,0,.1,.2,0,2,0,0,500,0,0,0,0,0,0,1,.01)}catch(e){}}}function S(e){return.6*Math.sin(.017*e)+.3*Math.sin(.031*e)+.15*Math.sin(.073*e)}function curvature(e){return 3*Math.sin(.013*e)+1.5*Math.sin(.029*e)+.8*Math.sin(.067*e)}function elevation(e){return 40*Math.sin(.009*e)+20*Math.sin(.023*e)+10*Math.sin(.051*e)}function terrainType(e){let t=.5*Math.sin(.037*e)+.5;return e>500&&(t+=.15),e>1500&&(t+=.15),t<.25?0:t<.6?1:t<.8?2:3}function getObstacles(e){let t=[],l=43758.5453*Math.sin(9.17*e+e*e*.003);l-=Math.floor(l);let a=Math.min(.4,.08+1e-4*e);if(l<a){let o=.8*Math.sin(7.31*e),i=l<.5*a?0:l<.85*a?1:2;t.push({x:o,type:i})}if(e>300){let l=29173.1*Math.sin(13.53*e+.007*e);if(l-=Math.floor(l),l<.3*a){let l=.7*Math.sin(11.07*e);t.push({x:l,type:0})}}return t}function D(e,t,l,a,o,i,n){x.fillStyle=n,x.beginPath(),x.moveTo(e-l,t),x.lineTo(e+l,t),x.lineTo(a+i,o),x.lineTo(a-i,o),x.fill()}function project(e,t){let l=curvature(e)-curvature(0|t),a=elevation(e)-elevation(0|t),o=e-(t||0);if(o<=0)return null;let i=300/o;return{x:W/2+(l-3*playerX)*i+shakeX,y:.45*H-a*i+.8*o*i+shakeY,w:.8*W*i,s:i}}function render(){let e=x.createLinearGradient(0,0,0,.45*H);e.addColorStop(0,"#4a8fc7"),e.addColorStop(1,"#a8d4f0"),x.fillStyle=e,x.fillRect(0,0,W,.45*H+20),x.fillStyle="#8899aa";for(let e=0;e<5;e++){let t=.15*W*e+(.02*dist+137*e)%W;t>W&&(t-=1.2*W),x.beginPath(),x.moveTo(t-80,.43*H),x.lineTo(t,.25*H+12*e),x.lineTo(t+90,.43*H),x.fill()}x.fillStyle="#e8eef4";for(let e=0;e<5;e++){let t=.15*W*e+(.02*dist+137*e)%W;t>W&&(t-=1.2*W),x.beginPath(),x.moveTo(t-25,.33*H+5*e),x.lineTo(t,.25*H+12*e),x.lineTo(t+30,.33*H+5*e),x.fill()}let t=Math.floor(dist),l=[];for(let e=80;e>=1;e--){let a=t+e,o=project(a,dist);!o||o.y<0||o.y>1.2*H||l.push({i:a,p:o,di:e})}for(let e=0;e<l.length;e++){let{i:t,p:a,di:o}=l[e],i=project(t+1,dist);if(!i)continue;let n,s=terrainType(t),r=t%2==0;if(n=0==s?r?"#e8eef4":"#dde5ec":1==s?r?"#f0f5fa":"#e0e8f0":2==s?r?"#c8d8e8":"#b8c8d8":r?"#d8e0e8":"#c8d0d8",D(a.x,a.y,a.w,i.x,i.y,i.w,n),o<50){let e=r?"#f44":"#c33";D(a.x-a.w,a.y,.02*a.w,i.x-i.w,i.y,.02*i.w,e),D(a.x+a.w,a.y,.02*a.w,i.x+i.w,i.y,.02*i.w,e)}let f=getObstacles(t);for(let e of f){let t=a.x+(e.x-playerX)*a.w*2,l=a.y,o=2*a.s;o<1||(0==e.type?(x.fillStyle="#2d5a27",x.beginPath(),x.moveTo(t,l-18*o),x.lineTo(t-6*o,l-3*o),x.lineTo(t+6*o,l-3*o),x.fill(),x.beginPath(),x.moveTo(t,l-14*o),x.lineTo(t-8*o,l-1*o),x.lineTo(t+8*o,l-1*o),x.fill(),x.fillStyle="#5a3a1a",x.fillRect(t-1.2*o,l-2*o,2.4*o,3*o),x.fillStyle="#fff",x.beginPath(),x.moveTo(t,l-18*o),x.lineTo(t-3*o,l-13*o),x.lineTo(t+3*o,l-13*o),x.fill()):1==e.type?(x.fillStyle="#667",x.beginPath(),x.moveTo(t-4*o,l),x.lineTo(t-3*o,l-5*o),x.lineTo(t+2*o,l-6*o),x.lineTo(t+5*o,l-2*o),x.lineTo(t+3*o,l),x.fill(),x.fillStyle="#778",x.beginPath(),x.moveTo(t-2*o,l-1*o),x.lineTo(t-1*o,l-5*o),x.lineTo(t+2*o,l-6*o),x.lineTo(t+3*o,l-2*o),x.fill()):(x.fillStyle="#33f",x.fillRect(t-12*o-1,l-16*o,2,16*o),x.fillRect(t+12*o-1,l-16*o,2,16*o),x.fillStyle="#33f",x.fillRect(t-12*o-1,l-16*o,3*o,4*o),x.fillRect(t+12*o-1,l-16*o,3*o,4*o)))}}if(speed>8&&1==state){x.strokeStyle="rgba(255,255,255,0.3)",x.lineWidth=1;for(let e=0;e<2*(speed-8);e++){let e=Math.random()*W,t=.4*H+Math.random()*H*.5;x.beginPath(),x.moveTo(e,t),x.lineTo(e+5*turnRate,t+15+2*speed),x.stroke()}}drawSkier();for(let e=particles.length-1;e>=0;e--){let t=particles[e];t.x+=t.vx,t.y+=t.vy,t.vy+=.1,t.life--,x.fillStyle=`rgba(255,255,255,${t.life/t.maxLife})`,x.fillRect(t.x,t.y,t.sz,t.sz),t.life<=0&&particles.splice(e,1)}}function drawSkier(){let e=W/2+shakeX,t=.72*H+shakeY,l=.3*turnRate,a=inputTuck;x.save(),x.translate(e,t),x.rotate(.15*l),x.fillStyle="rgba(0,0,0,0.15)",x.beginPath(),x.ellipse(0,14,12,4,0,0,2*PI),x.fill(),x.fillStyle="#225";let o=.2*l;x.save(),x.rotate(o),x.fillRect(-10,8,3,22),x.fillRect(7,8,3,22),x.restore(),x.fillStyle="#222";let i=a?8:12;x.fillRect(-6,0,4,i),x.fillRect(2,0,4,i),x.fillStyle="#d22",a?x.fillRect(-8,-6,16,8):x.fillRect(-7,-14,14,16),x.strokeStyle="#222",x.lineWidth=2;let n=a?-4:-8;x.beginPath(),x.moveTo(-7,n),x.lineTo(3*l-14,n+8),x.stroke(),x.beginPath(),x.moveTo(7,n),x.lineTo(14+3*l,n+8),x.stroke(),x.strokeStyle="#999",x.lineWidth=1,x.beginPath(),x.moveTo(3*l-14,n+8),x.lineTo(4*l-16,n+25),x.stroke(),x.beginPath(),x.moveTo(14+3*l,n+8),x.lineTo(16+4*l,n+25),x.stroke(),x.fillStyle="#fdb";let s=a?-10:-18;x.beginPath(),x.arc(0,s,5,0,2*PI),x.fill(),x.fillStyle="#d22",x.beginPath(),x.arc(0,s-1,5,PI,0),x.fill(),x.fillStyle="#333",x.fillRect(-4,s-2,8,3),x.restore()}function spraySnow(){let e=W/2,t=.74*H;for(let l=0;l<3;l++)particles.push({x:e+(turnRate>0?-15:15),y:t+10,vx:2*-turnRate+2*Math.random()-1,vy:3*-Math.random()-1,life:15+10*Math.random()|0,maxLife:25,sz:2+3*Math.random()})}function ambientSnow(){Math.random()<.3+.05*speed&&particles.push({x:Math.random()*W,y:-5,vx:.5*turnRate+Math.random()-.5,vy:1+2*Math.random()+.3*speed,life:60+40*Math.random()|0,maxLife:100,sz:1+2*Math.random()})}function checkCollision(){let e=Math.floor(dist);for(let t=2;t<6;t++){let l=e+t,a=getObstacles(l),o=l-dist;if(!(o<1.5||o>4))for(let e of a){let t=Math.abs(e.x-playerX);if(2==e.type){if(t<.15&&o<3&&(score+=50*combo,combo=Math.min(combo+1,10),combo>maxCombo&&(maxCombo=combo),sndGate))try{zzfxP(sndGate)}catch(e){}}else{if(t<(0==e.type?.06:.08))if(0==e.type){if(crashed=1,crashTimer=2,state=2,shakeX=10,shakeY=10,sndCrash)try{zzfxP(sndCrash)}catch(e){}let e=Math.floor(score);e>hiScore&&(hiScore=e,localStorage.setItem("hs",e))}else if(speed*=.4,combo=1,shakeX=5,shakeY=5,sndCrash)try{zzfxP(sndCrash)}catch(e){}}}}}function update(e){if(1!=state)return;e>.1&&(e=.1);let t=Math.floor(dist),l=.15+.003*(elevation(t+5)-elevation(t)),a=terrainType(t),o=0==a?.015:1==a?.025:2==a?.008:.02,i=9.8*l,n=.08*Math.abs(turnRate),s=speed*speed*.001*(inputTuck?.6:1);speed+=i*e,speed-=(o+n)*speed*e,speed-=s*e,speed=Math.max(2,Math.min(speed,20));let r=.002*curvature(t);if(turnRate+=(1.5*inputX-turnRate)*e*4,playerX+=turnRate*e*.8,playerX+=r*speed*e*.1,Math.abs(playerX)>.9&&(playerX=.9*Math.sign(playerX),speed*=.95),dist+=speed*e*.5,score+=speed*e*2,Math.abs(turnRate)>.5&&speed>3&&(spraySnow(),Math.random()<.05&&sndCarve))try{zzfxP(sndCarve)}catch(e){}ambientSnow(),shakeX*=.85,shakeY*=.85,Math.abs(shakeX)<.5&&(shakeX=0),Math.abs(shakeY)<.5&&(shakeY=0),checkCollision()}function drawHUD(){if(x.fillStyle="rgba(0,0,0,0.4)",x.font="bold "+Math.max(14,.04*W|0)+"px monospace",x.textAlign="left",1==state){let e=Math.max(14,.04*W|0);x.fillStyle="#fff",x.fillText("Score: "+Math.floor(score),10,e+5),x.fillText("Speed: "+speed.toFixed(1),10,2*e+10),combo>1&&(x.fillStyle="#ff0",x.fillText("Combo x"+combo+"!",10,3*e+15))}}function drawTitle(){x.textAlign="center",x.fillStyle="#fff",x.font="bold "+Math.max(36,.1*W|0)+"px monospace",x.fillText("INFINITE",W/2,.28*H),x.fillText("SKI",W/2,.38*H),x.font=Math.max(14,.04*W|0)+"px monospace",x.fillStyle="rgba(255,255,255,0.7)",x.fillText("Dodge trees, hit gates, go fast!",W/2,.48*H),Date.now()%1e3<600&&(x.fillStyle="#fff",x.font="bold "+Math.max(18,.05*W|0)+"px monospace",x.fillText("TAP TO START",W/2,.62*H)),hiScore>0&&(x.fillStyle="#ff0",x.font=Math.max(14,.04*W|0)+"px monospace",x.fillText("Best: "+hiScore,W/2,.72*H)),x.fillStyle="rgba(255,255,255,0.5)",x.font=Math.max(11,.03*W|0)+"px monospace",x.fillText("Touch sides to steer | Bottom = tuck",W/2,.82*H),x.fillText("Arrow keys / mouse on desktop",W/2,.87*H)}function drawGameOver(){x.textAlign="center",x.fillStyle="rgba(0,0,0,0.5)",x.fillRect(0,.2*H,W,.6*H),x.fillStyle="#f44",x.font="bold "+Math.max(32,.09*W|0)+"px monospace",x.fillText("CRASHED!",W/2,.35*H),x.fillStyle="#fff",x.font=Math.max(18,.05*W|0)+"px monospace",x.fillText("Score: "+Math.floor(score),W/2,.47*H),x.fillText("Distance: "+Math.floor(dist)+"m",W/2,.54*H),maxCombo>1&&x.fillText("Max Combo: x"+maxCombo,W/2,.61*H),Math.floor(score)>=hiScore&&hiScore>0&&(x.fillStyle="#ff0",x.fillText("NEW HIGH SCORE!",W/2,.68*H)),Date.now()%1e3<600&&(x.fillStyle="#fff",x.font="bold "+Math.max(16,.045*W|0)+"px monospace",x.fillText("TAP TO RETRY",W/2,.78*H))}function resetGame(){dist=0,speed=5,playerX=0,turnRate=0,score=0,combo=1,maxCombo=1,crashed=0,crashTimer=0,particles=[],shakeX=0,shakeY=0}let keys={},mouseDown=0,mouseX=0,mouseY=0;function handlePointer(e){e.preventDefault();let t=e.touches?e.touches[0]:e;mouseX=t.clientX,mouseY=t.clientY,mouseDown=1}function startOrRetry(){0==state?(state=1,resetGame()):2==state&&crashTimer<=0&&(state=0)}function processInput(){if(inputX=0,inputTuck=0,(keys.ArrowLeft||keys.a)&&(inputX=-1),(keys.ArrowRight||keys.d)&&(inputX=1),(keys.ArrowDown||keys.s)&&(inputTuck=1),mouseDown){let e=(mouseX-W/2)/(W/2);inputX=Math.max(-1,Math.min(1,1.5*e)),mouseY>.7*H&&(inputTuck=1)}}function frame(e){let t=(e-lastTime)/1e3;lastTime=e,t>.2&&(t=.016),processInput(),1==state&&update(t),2==state&&(crashTimer-=t,shakeX*=.9,shakeY*=.9),render(),drawHUD(),0==state&&drawTitle(),2==state&&drawGameOver(),requestAnimationFrame(frame)}onkeydown=e=>{keys[e.key]=1,1!=state&&startOrRetry()},onkeyup=e=>{keys[e.key]=0},c.addEventListener("touchstart",e=>{initSounds(),handlePointer(e),1!=state&&startOrRetry()},{passive:!1}),c.addEventListener("touchmove",e=>{handlePointer(e)},{passive:!1}),c.addEventListener("touchend",e=>{e.preventDefault(),mouseDown=0},{passive:!1}),c.addEventListener("mousedown",e=>{initSounds(),mouseDown=1,mouseX=e.clientX,mouseY=e.clientY,1!=state&&startOrRetry()}),c.addEventListener("mousemove",e=>{mouseDown&&(mouseX=e.clientX,mouseY=e.clientY)}),c.addEventListener("mouseup",()=>{mouseDown=0}),lastTime=performance.now(),requestAnimationFrame(frame)</script>