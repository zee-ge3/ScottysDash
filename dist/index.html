<!DOCTYPE html><meta charset="utf-8"><meta name="viewport"content="width=device-width,initial-scale=1,user-scalable=no"><title>Infinite Ski</title><style>*{margin:0;padding:0}body{background:#000;overflow:hidden;touch-action:none}canvas{display:block}</style><canvas id="c"></canvas><script>zzfxG=(e=1,t=.05,l=.22,o=0,a=0,i=.1,n=0,s=1,r=0,g=0,f=0,h=0,c=0,d=0,m=0,u=0,p=0,y=1,x=0,T=0)=>{let M=2*Math.PI,b=44100,S=Math.max,k=r*=500*M/b/b,v=l*b|0,W=i*b|0,w=o*b|0,R=a*b|0,X=x*b|0,C=T*b|0,H=v+w+W+R+(p*b|0),P=H,D=[],z=0,A=0,Y=0;for(;Y<P;Y++){let t=Y/b,l=Y<v?Y/v:Y<v+w?1:Y<H-R?S(0,1-(Y-v-w)/W):Y<H?S(0,1-(Y-H+R)/R):0;l=l<=0?0:l,z+=1+2*n*M/b;let o=Math.sin(z)*l*e*(1+d*Math.sin(2*M*t*c));A+=o,(g||f||h)&&(k+=500*f*M/b/b,r=500*g*M/b+k,A+=Math.sin(r)*h*l),D.push(u&&(Y<X||Y>H-C)?0:o*(1+m*Math.sin(2*M*t*s)))}return D};let W,H,c=document.getElementById("c"),g=c.getContext("2d");function resize(){W=c.width=innerWidth,H=c.height=innerHeight}resize(),onresize=resize;const DRAW=70,PI=Math.PI;let audioCtx,sndCarve,sndCrash,sndGate,state=0,dist=0,speed=0,playerX=0,turnRate=0,score=0,combo=1,maxCombo=1,hiScore=+localStorage.getItem("hs")||0,inputX=0,inputTuck=0,crashed=0,crashTimer=0,particles=[],shakeX=0,shakeY=0,lastTime=0;function initAudio(){if(!audioCtx)try{audioCtx=new(window.AudioContext||webkitAudioContext),audioCtx.resume(),sndCarve=zzfxG(.3,.02,.08,0,.04,.04,2,1.5),sndCrash=zzfxG(1,.05,.4,.1,.08,.3,3,.5,0,0,0,0,0,5,0,.5,.1),sndGate=zzfxG(.5,.01,.08,0,.08,.15,0,2,0,0,500)}catch(e){}}function playBuf(e){if(audioCtx&&e)try{let t=audioCtx.createBuffer(1,e.length,44100),l=t.getChannelData(0);for(let t=0;t<e.length;t++)l[t]=e[t];let o=audioCtx.createBufferSource();o.buffer=t,o.connect(audioCtx.destination),o.start()}catch(e){}}function curvature(e){return 5*Math.sin(.013*e)+3*Math.sin(.029*e)+1.5*Math.sin(.067*e)}function elevation(e){return 40*Math.sin(.009*e)+20*Math.sin(.023*e)+10*Math.sin(.051*e)}function terrainType(e){let t=.5*Math.sin(.037*e)+.5;return e>500&&(t+=.15),e>1500&&(t+=.15),t<.25?0:t<.6?1:t<.8?2:3}function getObs(e){let t=[],l=43758.5453*Math.sin(9.17*e+e*e*.003);l-=Math.floor(l);let o=Math.min(.4,.08+1e-4*e);if(l<o){let a=.75*Math.sin(7.31*e),i=l<.5*o?0:l<.85*o?1:2;t.push({x:a,t:i})}if(e>300){let l=29173.1*Math.sin(13.53*e+.007*e);l-=Math.floor(l),l<.3*o&&t.push({x:.65*Math.sin(11.07*e),t:0})}return t}function D(e,t,l,o,a,i,n){g.fillStyle=n,g.beginPath(),g.moveTo(e-l,t),g.lineTo(e+l,t),g.lineTo(o+i,a),g.lineTo(o-i,a),g.fill()}function render(){let e=.38*H;g.fillStyle="#dde5ec",g.fillRect(0,0,W,H);let t=g.createLinearGradient(0,0,0,e+10);t.addColorStop(0,"#4a8fc7"),t.addColorStop(1,"#b0d8f0"),g.fillStyle=t,g.fillRect(0,0,W,e+10);for(let t=0;t<6;t++){let l=(t*W*.22+.3*dist+197*t)%(W+200)-100,o=45+18*t;g.fillStyle="#7888a0",g.beginPath(),g.moveTo(l-90,e),g.lineTo(l,e-o),g.lineTo(l+100,e),g.fill(),g.fillStyle="#e0e8f0",g.beginPath(),g.moveTo(l-25,e-.5*o),g.lineTo(l,e-o),g.lineTo(l+30,e-.5*o),g.fill()}let l=dist,o=Math.floor(l),a=[],i=0;for(let t=0;t<=70;t++){let n=o+t,s=n-l;s<.2&&(s=.2),i+=.008*curvature(n);let r=1.5*(elevation(n)-elevation(o)),g=e+(.64*H-r)/s+shakeY,f=W/2+(i-playerX)*W*.4/s+shakeX,h=2.5*W/s,c=.4*W/s;a.push({si:n,sx:f,sy:g,tw:h,ow:c,dz:s})}for(let e=a.length-1;e>0;e--){let t=a[e],l=a[e-1];if(t.sy<-50&&l.sy<-50)continue;let o,i=terrainType(t.si),n=t.si%2==0;if(o=0==i?n?"#e8eef4":"#d8e0e8":1==i?n?"#f0f5fa":"#e2eaf2":2==i?n?"#c0d4e8":"#aec4d8":n?"#d0d8e0":"#c0c8d0",D(t.sx,t.sy,t.tw,l.sx,l.sy+1,l.tw,o),t.dz>1&&t.dz<30){let e=n?"#e44":"#c33",o=Math.max(1,.015*t.ow),a=Math.max(1,.015*l.ow);D(t.sx-t.ow,t.sy,o,l.sx-l.ow,l.sy,a,e),D(t.sx+t.ow,t.sy,o,l.sx+l.ow,l.sy,a,e)}let s=getObs(t.si);for(let e of s){let l=t.sx+(e.x-playerX)*t.ow*2,o=t.sy,a=.04*Math.min(W,H)/t.dz;if(!(a<1.5))if(0==e.t)g.fillStyle="#2d5a27",g.beginPath(),g.moveTo(l,o-3*a),g.lineTo(l-1.2*a,o-.5*a),g.lineTo(l+1.2*a,o-.5*a),g.fill(),g.beginPath(),g.moveTo(l,o-2.2*a),g.lineTo(l-1.5*a,o),g.lineTo(l+1.5*a,o),g.fill(),g.fillStyle="#5a3a1a",g.fillRect(l-.2*a,o,.4*a,.6*a),g.fillStyle="#fff",g.beginPath(),g.moveTo(l,o-3*a),g.lineTo(l-.5*a,o-2.2*a),g.lineTo(l+.5*a,o-2.2*a),g.fill();else if(1==e.t)g.fillStyle="#667",g.beginPath(),g.moveTo(l-a,o),g.lineTo(l-.6*a,o-1.2*a),g.lineTo(l+.4*a,o-1.4*a),g.lineTo(l+a,o-.4*a),g.lineTo(l+.8*a,o),g.fill(),g.fillStyle="#889",g.beginPath(),g.moveTo(l-.3*a,o-.2*a),g.lineTo(l,o-1.3*a),g.lineTo(l+.7*a,o-.5*a),g.fill();else{let e=.35*t.ow;g.strokeStyle="#33f",g.lineWidth=Math.max(2,.15*a),g.beginPath(),g.moveTo(l-e,o),g.lineTo(l-e,o-2.5*a),g.stroke(),g.beginPath(),g.moveTo(l+e,o),g.lineTo(l+e,o-2.5*a),g.stroke(),g.fillStyle="#33f",g.fillRect(l-e,o-2.5*a,.5*a,.6*a),g.fillRect(l+e-.1*a,o-2.5*a,.5*a,.6*a)}}}if(speed>8&&1==state){g.strokeStyle="rgba(255,255,255,0.3)",g.lineWidth=1;for(let e=0;e<2*(speed-8);e++){let e=Math.random()*W,t=.4*H+Math.random()*H*.5;g.beginPath(),g.moveTo(e,t),g.lineTo(e+5*turnRate,t+15+2*speed),g.stroke()}}drawSkier();for(let e=particles.length-1;e>=0;e--){let t=particles[e];t.x+=t.vx,t.y+=t.vy,t.vy+=.1,t.life--,g.fillStyle=`rgba(255,255,255,${t.life/t.ml})`,g.fillRect(t.x,t.y,t.sz,t.sz),t.life<=0&&particles.splice(e,1)}}function drawSkier(){let e=W/2+shakeX,t=.7*H+shakeY,l=.3*turnRate,o=inputTuck;g.save(),g.translate(e,t),g.rotate(.15*l),g.fillStyle="rgba(0,0,0,0.15)",g.beginPath(),g.ellipse(0,14,12,4,0,0,2*PI),g.fill(),g.fillStyle="#225",g.save(),g.rotate(.2*l),g.fillRect(-10,8,3,22),g.fillRect(7,8,3,22),g.restore(),g.fillStyle="#222";let a=o?8:12;g.fillRect(-6,0,4,a),g.fillRect(2,0,4,a),g.fillStyle="#d22",o?g.fillRect(-8,-6,16,8):g.fillRect(-7,-14,14,16),g.strokeStyle="#222",g.lineWidth=2;let i=o?-4:-8;g.beginPath(),g.moveTo(-7,i),g.lineTo(3*l-14,i+8),g.stroke(),g.beginPath(),g.moveTo(7,i),g.lineTo(14+3*l,i+8),g.stroke(),g.strokeStyle="#999",g.lineWidth=1,g.beginPath(),g.moveTo(3*l-14,i+8),g.lineTo(4*l-16,i+25),g.stroke(),g.beginPath(),g.moveTo(14+3*l,i+8),g.lineTo(16+4*l,i+25),g.stroke(),g.fillStyle="#fdb";let n=o?-10:-18;g.beginPath(),g.arc(0,n,5,0,2*PI),g.fill(),g.fillStyle="#d22",g.beginPath(),g.arc(0,n-1,5,PI,0),g.fill(),g.fillStyle="#333",g.fillRect(-4,n-2,8,3),g.restore()}function spraySnow(){let e=W/2,t=.72*H;for(let l=0;l<3;l++)particles.push({x:e+(turnRate>0?-15:15),y:t+10,vx:2*-turnRate+2*Math.random()-1,vy:3*-Math.random()-1,life:15+10*Math.random()|0,ml:25,sz:2+3*Math.random()})}function ambientSnow(){Math.random()<.3+.05*speed&&particles.push({x:Math.random()*W,y:-5,vx:.5*turnRate+Math.random()-.5,vy:1+2*Math.random()+.3*speed,life:60+40*Math.random()|0,ml:100,sz:1+2*Math.random()})}function checkCollision(){let e=Math.floor(dist);for(let t=1;t<6;t++){let l=e+t,o=getObs(l),a=l-dist;if(!(a<1||a>3.5))for(let e of o){let t=Math.abs(e.x-playerX);if(2==e.t)t<.18&&a>1.5&&a<2.5&&(score+=50*combo,combo=Math.min(combo+1,10),combo>maxCombo&&(maxCombo=combo),playBuf(sndGate));else{if(t<(0==e.t?.07:.09))if(0==e.t){crashed=1,crashTimer=2,state=2,shakeX=10,shakeY=10,playBuf(sndCrash);let e=Math.floor(score);e>hiScore&&(hiScore=e,localStorage.setItem("hs",e))}else speed*=.4,combo=1,shakeX=5,shakeY=5,playBuf(sndCrash)}}}}function update(e){if(1!=state)return;e>.1&&(e=.1);let t=Math.floor(dist),l=.15+.003*(elevation(t+5)-elevation(t)),o=terrainType(t),a=0==o?.015:1==o?.025:2==o?.008:.02,i=9.8*l,n=.08*Math.abs(turnRate),s=speed*speed*.001*(inputTuck?.6:1);speed+=i*e,speed-=(a+n)*speed*e,speed-=s*e,speed=Math.max(2,Math.min(speed,20));let r=.002*curvature(t);turnRate+=(1.5*inputX-turnRate)*e*4,playerX+=turnRate*e*.8,playerX+=r*speed*e*.1,Math.abs(playerX)>.9&&(playerX=.9*Math.sign(playerX),speed*=.95),dist+=speed*e*.5,score+=speed*e*2,Math.abs(turnRate)>.5&&speed>3&&(spraySnow(),Math.random()<.05&&playBuf(sndCarve)),ambientSnow(),shakeX*=.85,shakeY*=.85,Math.abs(shakeX)<.5&&(shakeX=0),Math.abs(shakeY)<.5&&(shakeY=0),checkCollision()}function drawHUD(){if(1!=state)return;let e=Math.max(14,.04*W|0);g.textAlign="left",g.font="bold "+e+"px monospace",g.fillStyle="#fff",g.fillText("Score: "+Math.floor(score),10,e+5),g.fillText("Speed: "+speed.toFixed(1),10,2*e+10),combo>1&&(g.fillStyle="#ff0",g.fillText("Combo x"+combo+"!",10,3*e+15))}function drawTitle(){g.textAlign="center",g.fillStyle="#fff",g.font="bold "+Math.max(36,.1*W|0)+"px monospace",g.fillText("INFINITE",W/2,.28*H),g.fillText("SKI",W/2,.38*H),g.font=Math.max(14,.04*W|0)+"px monospace",g.fillStyle="rgba(255,255,255,0.7)",g.fillText("Dodge trees, hit gates, go fast!",W/2,.48*H),Date.now()%1e3<600&&(g.fillStyle="#fff",g.font="bold "+Math.max(18,.05*W|0)+"px monospace",g.fillText("TAP TO START",W/2,.62*H)),hiScore>0&&(g.fillStyle="#ff0",g.font=Math.max(14,.04*W|0)+"px monospace",g.fillText("Best: "+hiScore,W/2,.72*H)),g.fillStyle="rgba(255,255,255,0.5)",g.font=Math.max(11,.03*W|0)+"px monospace",g.fillText("Touch sides to steer | Bottom = tuck",W/2,.82*H),g.fillText("Arrow keys / mouse on desktop",W/2,.87*H)}function drawGameOver(){g.textAlign="center",g.fillStyle="rgba(0,0,0,0.5)",g.fillRect(0,.2*H,W,.6*H),g.fillStyle="#f44",g.font="bold "+Math.max(32,.09*W|0)+"px monospace",g.fillText("CRASHED!",W/2,.35*H),g.fillStyle="#fff",g.font=Math.max(18,.05*W|0)+"px monospace",g.fillText("Score: "+Math.floor(score),W/2,.47*H),g.fillText("Distance: "+Math.floor(dist)+"m",W/2,.54*H),maxCombo>1&&g.fillText("Max Combo: x"+maxCombo,W/2,.61*H),Math.floor(score)>=hiScore&&hiScore>0&&(g.fillStyle="#ff0",g.fillText("NEW HIGH SCORE!",W/2,.68*H)),Date.now()%1e3<600&&(g.fillStyle="#fff",g.font="bold "+Math.max(16,.045*W|0)+"px monospace",g.fillText("TAP TO RETRY",W/2,.78*H))}function resetGame(){dist=0,speed=5,playerX=0,turnRate=0,score=0,combo=1,maxCombo=1,crashed=0,crashTimer=0,particles=[],shakeX=0,shakeY=0}let keys={},mouseDown=0,mouseX=0,mouseY=0;function handlePointer(e){e.preventDefault();let t=e.touches?e.touches[0]:e;mouseX=t.clientX,mouseY=t.clientY,mouseDown=1}function startOrRetry(){0==state?(state=1,resetGame()):2==state&&crashTimer<=0&&(state=0)}function processInput(){if(inputX=0,inputTuck=0,(keys.ArrowLeft||keys.a)&&(inputX=-1),(keys.ArrowRight||keys.d)&&(inputX=1),(keys.ArrowDown||keys.s)&&(inputTuck=1),mouseDown){let e=(mouseX-W/2)/(W/2);inputX=Math.max(-1,Math.min(1,1.5*e)),mouseY>.7*H&&(inputTuck=1)}}function frame(e){let t=(e-lastTime)/1e3;lastTime=e,t>.2&&(t=.016),processInput(),1==state&&update(t),2==state&&(crashTimer-=t,shakeX*=.9,shakeY*=.9),render(),drawHUD(),0==state&&drawTitle(),2==state&&drawGameOver(),requestAnimationFrame(frame)}onkeydown=e=>{keys[e.key]=1,1!=state&&startOrRetry()},onkeyup=e=>{keys[e.key]=0},c.addEventListener("touchstart",e=>{initAudio(),handlePointer(e),1!=state&&startOrRetry()},{passive:!1}),c.addEventListener("touchmove",e=>{handlePointer(e)},{passive:!1}),c.addEventListener("touchend",e=>{e.preventDefault(),mouseDown=0},{passive:!1}),c.addEventListener("mousedown",e=>{initAudio(),mouseDown=1,mouseX=e.clientX,mouseY=e.clientY,1!=state&&startOrRetry()}),c.addEventListener("mousemove",e=>{mouseDown&&(mouseX=e.clientX,mouseY=e.clientY)}),c.addEventListener("mouseup",()=>{mouseDown=0}),lastTime=performance.now(),requestAnimationFrame(frame)</script>