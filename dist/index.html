<!DOCTYPE html><meta charset="utf-8"><meta name="viewport"content="width=device-width,initial-scale=1,user-scalable=no"><title>Infinite Ski</title><style>*{margin:0;padding:0}body{background:#000;overflow:hidden;touch-action:none}canvas{display:block}</style><canvas id="c"></canvas><script>zzfxG=(e=1,t=.05,a=.22,l=0,o=0,i=.1,n=0,r=1,s=0,g=0,c=0,f=0,h=0,p=0,m=0,d=0,u=0,M=1,x=0,S=0)=>{let y=2*Math.PI,T=44100,b=Math.max,k=s*=500*y/T/T,W=a*T|0,v=i*T|0,w=l*T|0,H=o*T|0,X=x*T|0,Y=S*T|0,R=W+w+v+H+(u*T|0),C=R,P=[],A=0,D=0,Z=0;for(;Z<C;Z++){let t=Z/T,a=Z<W?Z/W:Z<W+w?1:Z<R-H?b(0,1-(Z-W-w)/v):Z<R?b(0,1-(Z-R+H)/H):0;a=a<=0?0:a,A+=1+2*n*y/T;let l=Math.sin(A)*a*e*(1+p*Math.sin(2*y*t*h));D+=l,(g||c||f)&&(k+=500*c*y/T/T,s=500*g*y/T+k,D+=Math.sin(s)*f*a),P.push(d&&(Z<X||Z>R-Y)?0:l*(1+m*Math.sin(2*y*t*r)))}return P};let W,H,c=document.getElementById("c"),g=c.getContext("2d");function resize(){W=c.width=innerWidth,H=c.height=innerHeight}resize(),onresize=resize;const DRAW=80,PI=Math.PI;let audioCtx,sndCarve,state=0,speed=0,turnRate=0,score=0,combo=1,maxCombo=1,hiScore=+localStorage.getItem("hs")||0,inputX=0,inputTuck=0,crashed=0,crashTimer=0,particles=[],shakeX=0,shakeY=0,lastTime=0,pX=0,pY=0,pZ=0,camX=0,camY=3,camZ=-5,pScrX=0,pScrY=0,slopeVal=0,prevSpd=5,accelVal=0;function lerp(e,t,a){return e+(t-e)*a}function initAudio(){if(!audioCtx)try{audioCtx=new(window.AudioContext||webkitAudioContext),audioCtx.resume(),sndCarve=zzfxG(.3,.02,.08,0,.04,.04,2,1.5)}catch(e){}}function playBuf(e){if(audioCtx&&e)try{let t=audioCtx.createBuffer(1,e.length,44100),a=t.getChannelData(0);for(let t=0;t<e.length;t++)a[t]=e[t];let l=audioCtx.createBufferSource();l.buffer=t,l.connect(audioCtx.destination),l.start()}catch(e){}}function getHeight(e,t){return.25*(40*Math.sin(.009*t)+20*Math.sin(.023*t)+10*Math.sin(.051*t)+8*Math.sin(.1*t)+5*Math.sin(.04*e+.012*t))}function curvature(e){return 5*Math.sin(.013*e)+3*Math.sin(.029*e)+1.5*Math.sin(.067*e)}function terrainType(e){let t=.5*Math.sin(.037*e)+.5;return e>500&&(t+=.15),e>1500&&(t+=.15),t<.25?0:t<.6?1:t<.8?2:3}function D(e,t,a,l,o,i,n){g.fillStyle=n,g.beginPath(),g.moveTo(e-a,t),g.lineTo(e+a,t),g.lineTo(l+i,o),g.lineTo(l-i,o),g.fill()}function drawMtn(e,t,a,l,o,i){g.fillStyle=l,g.beginPath(),g.moveTo(-20,H);for(let l=-20;l<=W+20;l+=6){let i=l+o,n=Math.sin(.005*i+a)*t*.4+Math.sin(.013*i+2.3*a)*t*.35+Math.sin(.027*i+4.7*a)*t*.25;g.lineTo(l,e-n)}if(g.lineTo(W+20,H),g.closePath(),g.fill(),i){g.fillStyle=i,g.beginPath();let l=.45*t;g.moveTo(-20,e-l);for(let i=-20;i<=W+20;i+=6){let n=i+o,r=Math.sin(.005*n+a)*t*.4+Math.sin(.013*n+2.3*a)*t*.35+Math.sin(.027*n+4.7*a)*t*.25;g.lineTo(i,r>l?e-r:e-l)}g.lineTo(W+20,e-l),g.closePath(),g.fill()}}function render(){let e=.38*H,t=.5*H,a=g.createLinearGradient(0,0,0,H);a.addColorStop(0,"#3a7fb7"),a.addColorStop(.3,"#7ab8e0"),a.addColorStop(.55,"#c0ddf0"),a.addColorStop(1,"#e0e8f0"),g.fillStyle=a,g.fillRect(0,0,W,H);let l=.75*W,o=.12*H,i=g.createRadialGradient(l,o,5,l,o,.13*H);i.addColorStop(0,"rgba(255,255,230,0.9)"),i.addColorStop(.15,"rgba(255,250,200,0.5)"),i.addColorStop(.5,"rgba(255,240,180,0.15)"),i.addColorStop(1,"rgba(255,240,180,0)"),g.fillStyle=i,g.beginPath(),g.arc(l,o,.13*H,0,2*PI),g.fill(),g.fillStyle="#fffde8",g.beginPath(),g.arc(l,o,10,0,2*PI),g.fill();let n=-camX,r=.05*camZ,s=turnRate*W*.012;drawMtn(.22*H,100,.5,"#b0c0d4",.15*n+.1*r+.15*s),drawMtn(.3*H,85,1.7,"#9aabbd",.35*n+.2*r+.3*s,"#d0dce8"),drawMtn(.38*H,65,3.1,"#8494a8",.7*n+.5*r+.6*s),drawMtn(.45*H,50,5.3,"#7080a0",1.2*n+.8*r+s);let c=Math.floor(camZ),f=[],h=0,p=Math.round(pZ-camZ),m=0;for(let a=0;a<=80;a++){let l=c+a,o=l-camZ;o<.2&&(o=.2),h+=.008*curvature(l),a==p&&(m=h);let i=getHeight(camX,l),n=e-(i-camY)*t/o+shakeY,r=W/2+h*W*.15/o+shakeX,s=Math.max(W,2.5*W/o);f.push({si:l,sx:r,sy:n,tw:s,dz:o,gh:i})}for(let e=f.length-1;e>0;e--){let t=f[e],a=f[e-1];if(t.sy<-50&&a.sy<-50)continue;let l=Math.max(0,Math.min(1,(t.gh+20)/40)),o=`rgb(${138+102*l|0},${138+107*l|0},${138+112*l|0})`;D(t.sx,t.sy,t.tw,a.sx,a.sy+1,a.tw,o);let i=a.gh-t.gh;Math.abs(i)>.08&&(g.globalAlpha=Math.min(.2,.4*Math.abs(i)),D(t.sx,t.sy,t.tw,a.sx,a.sy+1,a.tw,i>0?"#ffe":"#336"),g.globalAlpha=1)}if(accelVal>.15&&1==state){let e=14*accelVal|0;for(let t=0;t<e;t++){let e=Math.random()*PI*2,t=15+35*Math.random(),a=t+25+30*accelVal;g.strokeStyle=`rgba(255,255,255,${Math.min(.5,.2*accelVal)})`,g.lineWidth=1.5+.5*accelVal,g.beginPath(),g.moveTo(pScrX+Math.cos(e)*t,pScrY+Math.sin(e)*t*.5),g.lineTo(pScrX+Math.cos(e)*a,pScrY+Math.sin(e)*a*.5),g.stroke()}}let d=pZ-camZ;if(d>.3){pScrX=W/2+(m+2*(pX-camX))*W*.15/d+shakeX,pScrY=e-(pY-camY)*t/d+shakeY,drawSkier(pScrX,pScrY,9/d)}for(let e=particles.length-1;e>=0;e--){let t=particles[e];t.x+=t.vx,t.y+=t.vy,t.vy+=.1,t.life--,g.fillStyle=`rgba(255,255,255,${t.life/t.ml})`,g.fillRect(t.x,t.y,t.sz,t.sz),t.life<=0&&particles.splice(e,1)}}function drawSkier(e,t,a){let l=.3*turnRate;g.save(),g.translate(e,t),g.scale(a,a),g.rotate(.15*l),g.fillStyle="rgba(0,0,0,0.15)",g.beginPath(),g.ellipse(0,14,12,4,0,0,2*PI),g.fill(),g.fillStyle="#225",g.save(),g.rotate(.2*l),g.fillRect(-10,8,3,22),g.fillRect(7,8,3,22),g.restore(),g.fillStyle="#222";let o=inputTuck?8:12;g.fillRect(-6,0,4,o),g.fillRect(2,0,4,o),g.fillStyle="#d22",inputTuck?g.fillRect(-8,-6,16,8):g.fillRect(-7,-14,14,16),g.strokeStyle="#222",g.lineWidth=2;let i=inputTuck?-4:-8;g.beginPath(),g.moveTo(-7,i),g.lineTo(3*l-14,i+8),g.stroke(),g.beginPath(),g.moveTo(7,i),g.lineTo(14+3*l,i+8),g.stroke(),g.strokeStyle="#999",g.lineWidth=1,g.beginPath(),g.moveTo(3*l-14,i+8),g.lineTo(4*l-16,i+25),g.stroke(),g.beginPath(),g.moveTo(14+3*l,i+8),g.lineTo(16+4*l,i+25),g.stroke(),g.fillStyle="#fdb";let n=inputTuck?-10:-18;g.beginPath(),g.arc(0,n,5,0,2*PI),g.fill(),g.fillStyle="#d22",g.beginPath(),g.arc(0,n-1,5,PI,0),g.fill(),g.fillStyle="#333",g.fillRect(-4,n-2,8,3),g.restore()}function spraySnow(){for(let e=0;e<3;e++)particles.push({x:pScrX+(turnRate>0?-15:15),y:pScrY+10,vx:2*-turnRate+2*Math.random()-1,vy:3*-Math.random()-1,life:15+10*Math.random()|0,ml:25,sz:2+3*Math.random()})}function ambientSnow(){Math.random()<.3+.05*speed&&particles.push({x:Math.random()*W,y:-5,vx:.5*turnRate+Math.random()-.5,vy:1+2*Math.random()+.3*speed,life:60+40*Math.random()|0,ml:100,sz:1+2*Math.random()})}function update(e){if(1!=state)return;e>.1&&(e=.1),slopeVal=getHeight(pX,pZ+2)-getHeight(pX,pZ-2);let t=.12-.06*slopeVal,a=terrainType(Math.floor(pZ)),l=0==a?.015:1==a?.025:2==a?.008:.02,o=9.8*t,i=.08*Math.abs(turnRate),n=speed*speed*.001*(inputTuck?.6:1);speed+=o*e,speed-=(l+i)*speed*e,speed-=n*e,speed=Math.max(1,Math.min(speed,25)),accelVal=lerp(accelVal,Math.max(0,(speed-prevSpd)/e),Math.min(1,10*e)),prevSpd=speed;let r=.002*curvature(pZ);turnRate+=(1.5*inputX-turnRate)*e*4,pX+=turnRate*e*.8,pX+=r*speed*e*.1,pZ+=speed*e*.5,pY=getHeight(pX,pZ),score+=speed*e*2;let s=Math.min(1,5*e);camX=lerp(camX,pX,s),camY=lerp(camY,pY+3,s),camZ=lerp(camZ,pZ-5,s),Math.abs(turnRate)>.5&&speed>3&&(spraySnow(),Math.random()<.05&&playBuf(sndCarve)),ambientSnow(),shakeX*=.85,shakeY*=.85,Math.abs(shakeX)<.5&&(shakeX=0),Math.abs(shakeY)<.5&&(shakeY=0)}function drawHUD(){if(1!=state)return;let e=Math.max(14,.04*W|0);g.textAlign="left",g.font="bold "+e+"px monospace",g.fillStyle="#fff",g.fillText("Score: "+Math.floor(score),10,e+5),g.fillText("Speed: "+speed.toFixed(1),10,2*e+10),combo>1&&(g.fillStyle="#ff0",g.fillText("Combo x"+combo+"!",10,3*e+15)),g.save(),g.translate(W-45,1.5*e);let t=Math.atan2(slopeVal,4);g.rotate(t),g.fillStyle=slopeVal<-.3?"#4f8":slopeVal>.3?"#f84":"#aaa",g.beginPath(),g.moveTo(18,0),g.lineTo(-8,-7),g.lineTo(-4,0),g.lineTo(-8,7),g.closePath(),g.fill(),g.restore(),g.textAlign="right",g.fillStyle="#ccc",g.font=Math.max(11,.03*W|0)+"px monospace",g.fillText(2e3+Math.floor(10*pY)+"m",W-10,3*e)}function drawTitle(){g.textAlign="center",g.fillStyle="#fff",g.font="bold "+Math.max(36,.1*W|0)+"px monospace",g.fillText("INFINITE",W/2,.28*H),g.fillText("SKI",W/2,.38*H),g.font=Math.max(14,.04*W|0)+"px monospace",g.fillStyle="rgba(255,255,255,0.7)",g.fillText("Dodge trees, hit gates, go fast!",W/2,.48*H),Date.now()%1e3<600&&(g.fillStyle="#fff",g.font="bold "+Math.max(18,.05*W|0)+"px monospace",g.fillText("TAP TO START",W/2,.62*H)),hiScore>0&&(g.fillStyle="#ff0",g.font=Math.max(14,.04*W|0)+"px monospace",g.fillText("Best: "+hiScore,W/2,.72*H)),g.fillStyle="rgba(255,255,255,0.5)",g.font=Math.max(11,.03*W|0)+"px monospace",g.fillText("Touch sides to steer | Bottom = tuck",W/2,.82*H),g.fillText("Arrow keys / mouse on desktop",W/2,.87*H)}function drawGameOver(){g.textAlign="center",g.fillStyle="rgba(0,0,0,0.5)",g.fillRect(0,.2*H,W,.6*H),g.fillStyle="#f44",g.font="bold "+Math.max(32,.09*W|0)+"px monospace",g.fillText("CRASHED!",W/2,.35*H),g.fillStyle="#fff",g.font=Math.max(18,.05*W|0)+"px monospace",g.fillText("Score: "+Math.floor(score),W/2,.47*H),g.fillText("Distance: "+Math.floor(pZ)+"m",W/2,.54*H),maxCombo>1&&g.fillText("Max Combo: x"+maxCombo,W/2,.61*H),Math.floor(score)>=hiScore&&hiScore>0&&(g.fillStyle="#ff0",g.fillText("NEW HIGH SCORE!",W/2,.68*H)),Date.now()%1e3<600&&(g.fillStyle="#fff",g.font="bold "+Math.max(16,.045*W|0)+"px monospace",g.fillText("TAP TO RETRY",W/2,.78*H))}function resetGame(){pX=0,pZ=0,pY=getHeight(0,0),speed=5,turnRate=0,camX=0,camY=pY+3,camZ=pZ-5,score=0,combo=1,maxCombo=1,crashed=0,crashTimer=0,particles=[],shakeX=0,shakeY=0,prevSpd=5,accelVal=0}let keys={},mouseDown=0,mouseX=0,mouseY=0;function handlePointer(e){e.preventDefault();let t=e.touches?e.touches[0]:e;mouseX=t.clientX,mouseY=t.clientY,mouseDown=1}function startOrRetry(){0==state?(state=1,resetGame()):2==state&&crashTimer<=0&&(state=0)}function processInput(){if(inputX=0,inputTuck=0,(keys.ArrowLeft||keys.a)&&(inputX=-1),(keys.ArrowRight||keys.d)&&(inputX=1),(keys.ArrowDown||keys.s)&&(inputTuck=1),mouseDown){let e=(mouseX-W/2)/(W/2);inputX=Math.max(-1,Math.min(1,1.5*e)),mouseY>.7*H&&(inputTuck=1)}}function frame(e){let t=(e-lastTime)/1e3;lastTime=e,t>.2&&(t=.016),processInput(),1==state&&update(t),2==state&&(crashTimer-=t,shakeX*=.9,shakeY*=.9),render(),drawHUD(),0==state&&drawTitle(),2==state&&drawGameOver(),requestAnimationFrame(frame)}onkeydown=e=>{keys[e.key]=1,1!=state&&startOrRetry()},onkeyup=e=>{keys[e.key]=0},c.addEventListener("touchstart",e=>{initAudio(),handlePointer(e),1!=state&&startOrRetry()},{passive:!1}),c.addEventListener("touchmove",e=>{handlePointer(e)},{passive:!1}),c.addEventListener("touchend",e=>{e.preventDefault(),mouseDown=0},{passive:!1}),c.addEventListener("mousedown",e=>{initAudio(),mouseDown=1,mouseX=e.clientX,mouseY=e.clientY,1!=state&&startOrRetry()}),c.addEventListener("mousemove",e=>{mouseDown&&(mouseX=e.clientX,mouseY=e.clientY)}),c.addEventListener("mouseup",()=>{mouseDown=0}),pY=getHeight(0,0),camY=pY+3,lastTime=performance.now(),requestAnimationFrame(frame)</script>